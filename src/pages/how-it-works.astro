---
import Base from '../layouts/Base.astro';
---

<Base title="How It Works" description="Three layers, one architecture. The technical foundation of Synthesis.">
  <!-- Hero -->
  <section class="section pt-12 sm:pt-16">
    <div class="container-wide">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
        <div class="fade-section">
          <p class="text-sm font-medium text-accent-600 dark:text-accent-400 mb-3 uppercase tracking-wide">Architecture</p>
          <h1 class="heading-1 mb-4">How It Works</h1>
          <p class="body-large text-synthesis-600 dark:text-synthesis-400">
            Three layers, each enabling the next. The Node produces Memory Packs. 
            Packs feed the Commons. Commons exchange value.
          </p>
        </div>
        <div class="fade-section pt-2">
          <div class="space-y-3 text-base">
            <div class="flex items-center gap-4 pb-3 border-b border-synthesis-100 dark:border-synthesis-800">
              <span class="text-violet-600 dark:text-violet-400 font-mono text-sm w-8">L3</span>
              <span class="text-synthesis-800 dark:text-synthesis-200 font-medium flex-1">Knowledge Economy</span>
              <span class="text-synthesis-500 text-sm">Exchange</span>
            </div>
            <div class="flex items-center gap-4 pb-3 border-b border-synthesis-100 dark:border-synthesis-800">
              <span class="text-accent-600 dark:text-accent-400 font-mono text-sm w-8">L2</span>
              <span class="text-synthesis-800 dark:text-synthesis-200 font-medium flex-1">Cognitive Commons</span>
              <span class="text-synthesis-500 text-sm">Accumulate</span>
            </div>
            <div class="flex items-center gap-4">
              <span class="text-emerald-600 dark:text-emerald-400 font-mono text-sm w-8">L1</span>
              <span class="text-synthesis-800 dark:text-synthesis-200 font-medium flex-1">The Node</span>
              <span class="text-synthesis-500 text-sm">Produce</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Layer 1: The Node -->
  <section class="section-narrow border-t border-synthesis-100 dark:border-synthesis-900">
    <div class="container-wide">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8">
        <div class="fade-section">
          <span class="text-emerald-600 dark:text-emerald-400 font-mono text-sm font-medium">LAYER 1</span>
          <h2 class="heading-3 mt-1 mb-2">The Node</h2>
          <p class="text-base text-synthesis-600 dark:text-synthesis-400">
            A persistent collaboration environment where a human and AI work as a cognitive pair.
          </p>
        </div>
        
        <div class="lg:col-span-2 fade-section">
          <div class="grid sm:grid-cols-2 gap-6 sm:gap-8">
            <div>
              <p class="text-sm text-synthesis-500 mb-3 uppercase tracking-wide">Traditional AI Chat</p>
              <ul class="space-y-1 text-base text-synthesis-500">
                <li>Forgets between sessions</li>
                <li>Anonymous interactions</li>
                <li>Captures outputs only</li>
                <li>No provenance</li>
                <li>Tool relationship</li>
              </ul>
            </div>
            <div>
              <p class="text-sm text-emerald-600 dark:text-emerald-400 mb-3 uppercase tracking-wide">Synthesis Node</p>
              <ul class="space-y-1 text-base text-synthesis-700 dark:text-synthesis-300">
                <li><strong>Remembers</strong> across sessions</li>
                <li><strong>Cryptographic</strong> identity</li>
                <li><strong>Captures</strong> reasoning</li>
                <li><strong>Signed</strong> attestations</li>
                <li><strong>Partnership</strong></li>
              </ul>
            </div>
          </div>
          <p class="text-base text-synthesis-600 dark:text-synthesis-400 mt-6 pt-4 border-t border-synthesis-100 dark:border-synthesis-800">
            <strong class="text-synthesis-800 dark:text-synthesis-200">Identity matters.</strong> Both human and AI have cryptographic keys. 
            When they create together, both sign. Conversation becomes verifiable collaboration.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Memory Pack -->
  <section class="section-narrow bg-synthesis-50/50 dark:bg-synthesis-900/30">
    <div class="container-wide">
      <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 sm:gap-8">
        <div class="fade-section">
          <h2 class="heading-3 mb-2">Memory Pack</h2>
          <p class="text-base text-synthesis-600 dark:text-synthesis-400">
            The atomic unit of transferable cognition.
          </p>
          <p class="text-base text-accent-600 dark:text-accent-400 font-medium mt-2">
            Apprenticeship, bottled.
          </p>
        </div>
        
        <div class="lg:col-span-3 fade-section">
          <div class="grid grid-cols-5 gap-4 text-center text-sm">
            <div>
              <p class="text-synthesis-800 dark:text-synthesis-200 font-medium mb-1">Conversation</p>
              <p class="text-synthesis-500">Reasoning, decisions, pivots</p>
            </div>
            <div>
              <p class="text-synthesis-800 dark:text-synthesis-200 font-medium mb-1">Artifacts</p>
              <p class="text-synthesis-500">Code, docs, designs</p>
            </div>
            <div>
              <p class="text-synthesis-800 dark:text-synthesis-200 font-medium mb-1">Synthesis</p>
              <p class="text-synthesis-500">AI-generated summary</p>
            </div>
            <div>
              <p class="text-synthesis-800 dark:text-synthesis-200 font-medium mb-1">Attestation</p>
              <p class="text-synthesis-500">Human + AI signatures</p>
            </div>
            <div>
              <p class="text-synthesis-800 dark:text-synthesis-200 font-medium mb-1">Lineage</p>
              <p class="text-synthesis-500">Prior pack references</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Layer 2: Commons -->
  <section class="section-narrow border-t border-synthesis-100 dark:border-synthesis-900">
    <div class="container-wide">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8">
        <div class="fade-section">
          <span class="text-accent-600 dark:text-accent-400 font-mono text-sm font-medium">LAYER 2</span>
          <h2 class="heading-3 mt-1 mb-2">Cognitive Commons</h2>
          <p class="text-base text-synthesis-600 dark:text-synthesis-400">
            Shared substrate where Memory Packs accumulate—collective intelligence of an organization.
          </p>
        </div>
        
        <div class="lg:col-span-2 fade-section">
          <pre class="text-sm text-synthesis-600 dark:text-synthesis-400 font-mono whitespace-pre overflow-x-auto bg-white dark:bg-synthesis-900/30 p-4 rounded-lg border border-synthesis-100 dark:border-synthesis-800"><span class="text-synthesis-500">COGNITIVE COMMONS</span>

   ┌────────┐   ┌────────┐   ┌────────┐
   │ <span class="text-emerald-600 dark:text-emerald-400">Node A</span> │   │ <span class="text-emerald-600 dark:text-emerald-400">Node B</span> │   │ <span class="text-emerald-600 dark:text-emerald-400">Node C</span> │
   └───┬────┘   └───┬────┘   └───┬────┘
       │            │            │
       └────────────┼────────────┘
                    │
                    ▼
            ┌─────────────────┐
            │  <span class="text-accent-600 dark:text-accent-400">Memory Packs</span>   │ ◄── Internal collaboration
            └────────┬────────┘
                     │
                     ▼
            ┌─────────────────┐
            │   + External    │ ◄── Acquired expertise
            └────────┬────────┘
                     │
                     ▼
          <span class="text-synthesis-800 dark:text-synthesis-200">Collective Intelligence</span></pre>
        </div>
      </div>
    </div>
  </section>

  <!-- Layer 3: Economy -->
  <section class="section-narrow border-t border-synthesis-100 dark:border-synthesis-900">
    <div class="container-wide">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8">
        <div class="fade-section">
          <span class="text-violet-600 dark:text-violet-400 font-mono text-sm font-medium">LAYER 3</span>
          <h2 class="heading-3 mt-1 mb-2">Knowledge Economy</h2>
          <p class="text-base text-synthesis-600 dark:text-synthesis-400">
            Exchange layer where verified packs flow between Commons and value flows back.
          </p>
        </div>
        
        <div class="lg:col-span-2 fade-section">
          <p class="text-sm text-synthesis-500 mb-3">Lineage royalty model:</p>
          <pre class="text-sm text-synthesis-600 dark:text-synthesis-400 font-mono whitespace-pre overflow-x-auto bg-white dark:bg-synthesis-900/30 p-4 rounded-lg border border-synthesis-100 dark:border-synthesis-800"><span class="text-synthesis-800 dark:text-synthesis-200">Expert A</span> creates <span class="text-accent-600 dark:text-accent-400">Pack A</span>
    └─► Licensed to <span class="text-synthesis-700 dark:text-synthesis-300">Org X</span>
            └─► <span class="text-synthesis-800 dark:text-synthesis-200">Expert B</span> creates <span class="text-accent-600 dark:text-accent-400">Pack B</span> (builds on A)
                    └─► Sold for <span class="text-emerald-600 dark:text-emerald-400">$1,000</span>
                            B gets <span class="text-emerald-600 dark:text-emerald-400">$800</span>, A gets <span class="text-emerald-600 dark:text-emerald-400">$200</span> (royalty)</pre>
          <p class="text-base text-synthesis-600 dark:text-synthesis-400 mt-4">
            <strong class="text-synthesis-800 dark:text-synthesis-200">Foundational work compounds.</strong> 
            Early contributions continue generating value as others build upon them.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- How pieces connect -->
  <section class="section-narrow bg-synthesis-50/50 dark:bg-synthesis-900/30">
    <div class="container-wide">
      <div class="fade-section">
        <h2 class="heading-3 mb-6">How The Pieces Connect</h2>
        <div class="flex flex-wrap gap-4 text-base">
          <div class="flex items-center gap-2">
            <span class="text-accent-600 dark:text-accent-400 font-mono font-bold">1</span>
            <span class="text-synthesis-700 dark:text-synthesis-300">Collaborate</span>
            <span class="text-synthesis-400">→</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-accent-600 dark:text-accent-400 font-mono font-bold">2</span>
            <span class="text-synthesis-700 dark:text-synthesis-300">Capture & sign</span>
            <span class="text-synthesis-400">→</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-accent-600 dark:text-accent-400 font-mono font-bold">3</span>
            <span class="text-synthesis-700 dark:text-synthesis-300">Accumulate</span>
            <span class="text-synthesis-400">→</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-accent-600 dark:text-accent-400 font-mono font-bold">4</span>
            <span class="text-synthesis-700 dark:text-synthesis-300">Exchange</span>
            <span class="text-synthesis-400">→</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-accent-600 dark:text-accent-400 font-mono font-bold">5</span>
            <span class="text-synthesis-700 dark:text-synthesis-300">Compound</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Status -->
  <section class="section-narrow border-t border-synthesis-100 dark:border-synthesis-900">
    <div class="container-wide">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8">
        <div class="fade-section">
          <h2 class="heading-3 mb-4">What's Built vs. Coming</h2>
          <div class="space-y-2 text-base">
            <div class="flex items-center gap-3">
              <span class="text-emerald-600 dark:text-emerald-400">✓</span>
              <span class="text-synthesis-700 dark:text-synthesis-300">Synthesis Node</span>
              <span class="text-synthesis-500 text-sm ml-auto">Operational</span>
            </div>
            <div class="flex items-center gap-3">
              <span class="text-emerald-600 dark:text-emerald-400">✓</span>
              <span class="text-synthesis-700 dark:text-synthesis-300">Memory substrate</span>
              <span class="text-synthesis-500 text-sm ml-auto">Working</span>
            </div>
            <div class="flex items-center gap-3">
              <span class="text-emerald-600 dark:text-emerald-400">✓</span>
              <span class="text-synthesis-700 dark:text-synthesis-300">Attestation system</span>
              <span class="text-synthesis-500 text-sm ml-auto">Working</span>
            </div>
            <div class="flex items-center gap-3">
              <span class="text-emerald-600 dark:text-emerald-400">✓</span>
              <span class="text-synthesis-700 dark:text-synthesis-300">Basic pack export</span>
              <span class="text-synthesis-500 text-sm ml-auto">Working</span>
            </div>
            <div class="flex items-center gap-3 text-synthesis-500">
              <span class="text-accent-500">◐</span>
              <span>Dual signing</span>
              <span class="text-sm ml-auto">In dev</span>
            </div>
            <div class="flex items-center gap-3 text-synthesis-500">
              <span>○</span>
              <span>Cognitive Commons</span>
              <span class="text-sm ml-auto">Designed</span>
            </div>
            <div class="flex items-center gap-3 text-synthesis-500">
              <span>○</span>
              <span>Knowledge Economy</span>
              <span class="text-sm ml-auto">Designed</span>
            </div>
          </div>
        </div>
        
        <div class="fade-section flex flex-col justify-center">
          <p class="text-base text-synthesis-700 dark:text-synthesis-300 mb-3">
            <strong class="text-synthesis-800 dark:text-synthesis-200">Layer 1 is real.</strong> 
            The foundation exists. Layers 2 and 3 are the path forward.
          </p>
          <a href="/node" class="text-base text-accent-600 dark:text-accent-400 hover:text-accent-500">
            Learn about Synthesis Node →
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Navigation -->
  <section class="section-narrow border-t border-synthesis-100 dark:border-synthesis-900">
    <div class="container-wide">
      <div class="fade-section flex flex-wrap justify-center gap-6 text-base">
        <a href="/vision" class="text-synthesis-600 dark:text-synthesis-400 hover:text-accent-600 dark:hover:text-accent-400 transition-colors">
          ← The Vision
        </a>
        <a href="/economics" class="text-synthesis-600 dark:text-synthesis-400 hover:text-accent-600 dark:hover:text-accent-400 transition-colors">
          Economics →
        </a>
        <a href="/node" class="text-synthesis-600 dark:text-synthesis-400 hover:text-accent-600 dark:hover:text-accent-400 transition-colors">
          Synthesis Node →
        </a>
      </div>
    </div>
  </section>
</Base>
